{% extends 'base.html' %}
{% block title %}Verify OTP - SmashStrix{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">Verify OTP</h2>
  <p>We’ve sent an OTP to <strong>{{ user.email }}</strong>.</p>

  <form method="POST">
    {% csrf_token %}
    <input type="text" name="otp" maxlength="6" placeholder="Enter OTP" required>
    <button type="submit">Verify OTP</button>
  </form>

  <p class="mt-2">Didn’t get the OTP? <a href="{% url 'forgot_password' %}">Try again</a></p>

  <script>
  let timer = 300; 
  let timerDisplay = document.createElement('p');
  document.querySelector('form').appendChild(timerDisplay);

  let countdown = setInterval(() => {
      let minutes = Math.floor(timer / 60);
      let seconds = timer % 60;
      timerDisplay.textContent = `OTP expires in ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
      if (timer <= 0) {
          clearInterval(countdown);
          timerDisplay.textContent = "OTP expired. Request new OTP.";
      }
      timer--;
  }, 1000);
  </script>
</div>
{% endblock %}
