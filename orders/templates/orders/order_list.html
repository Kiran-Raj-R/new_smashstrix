{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mx-auto py-10">

  <h2 class="text-2xl font-bold mb-8">My Orders</h2>

  {% if orders %}
  <div class="space-y-6">

    {% for order in orders %}
    <div class="bg-white shadow rounded-xl border p-6">

      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">

        <div>
          <p class="text-sm text-gray-500">Order ID</p>
          <p class="font-semibold">{{ order.order_id }}</p>
        </div>

        <div>
          <p class="text-sm text-gray-500">Placed On</p>
          <p class="font-medium">{{ order.created_at|date:"d M Y, h:i A" }}</p>
        </div>

        <div>
          <p class="text-sm text-gray-500">Payment</p>
          <p class="font-medium">{{ order.payment_method }}</p>
        </div>

        <div>
          <p class="text-sm text-gray-500">Total</p>
          <p class="font-semibold text-green-700">
            â‚¹{{ order.total|floatformat:2 }}
          </p>
        </div>

        <div>
          <span class="px-3 py-1 rounded-full text-sm font-medium
            {% if order.status == 'Pending' %}bg-yellow-100 text-yellow-700
            {% elif order.status == 'Processing' %}bg-blue-100 text-blue-700
            {% elif order.status == 'Shipped' %}bg-purple-100 text-purple-700
            {% elif order.status == 'Delivered' %}bg-green-100 text-green-700
            {% elif order.status == 'Cancelled' %}bg-red-100 text-red-700
            {% endif %}
          ">
            {{ order.status }}
          </span>
        </div>

      </div>

      <div class="mt-6 flex gap-4">

        <a href="{% url 'order_detail' order.order_id %}"
           class="px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition">
          View Details
        </a>

        {% if order.status == "pending" or order.status == "processing" %}
        <a href="{% url 'cancel_order' order.order_id %}"
           class="px-4 py-2 border border-red-500 text-red-600 rounded-lg hover:bg-red-50 transition">
          Cancel Order
        </a>
        {% endif %}

      </div>

    </div>
    {% endfor %}

  </div>

  {% else %}
  <div class="bg-white shadow rounded-xl border p-10 text-center">
    <p class="text-gray-600 mb-4">You have not placed any orders yet.</p>
    <a href="{% url 'shop' %}"
       class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition">
       Start Shopping
    </a>
  </div>
  {% endif %}

</div>
{% endblock %}